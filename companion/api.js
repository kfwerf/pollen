export function getPollenStats(lat, long) {
  const endTime = new Date();
  const apiKey = '';
  endTime.setUTCSeconds(60 * 60 * 12); // 24 hours for now
  const url = `https://api.climacell.co/v3/weather/forecast/hourly?lat=${lat}&lon=${long}&unit_system=si&start_time=now&end_time=${endTime.toISOString()}&fields=pollen_weed%2Cpollen_tree%2Cpollen_grass&apikey=${apiKey}`;

  const stored = [ { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T11:00:00.000Z',
    tree: 4,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T12:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T13:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T14:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T15:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T16:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T17:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T18:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T19:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T20:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T21:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T22:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-03T23:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T00:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T01:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T02:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T03:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T04:00:00.000Z',
    tree: 4,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T05:00:00.000Z',
    tree: 3,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T06:00:00.000Z',
    tree: 3,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T07:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T08:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T09:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T10:00:00.000Z',
    tree: 5,
    weed: 0 },
  { grass: 0,
    lat: 48.13194,
    lon: 11.54944,
    time: '2020-05-04T11:00:00.000Z',
    tree: 5,
    weed: 0 } ];
  console.log(url);
  return fetch(url).then(function(response) {
    return response.json();
  }).then(function (response) {
    return response.map(entry => ({
      lat: entry.lat,
      lon: entry.lon,
      time: entry.observation_time.value,
      grass: entry.pollen_grass.value,
      tree: entry.pollen_tree.value,
      weed: entry.pollen_weed.value,
    }));
  }).catch(function(error) {
    console.log('error', error);
  });
}